(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tourism"],{"0cb2":function(t,e,n){var i=n("e330"),a=n("7b0b"),r=Math.floor,s=i("".charAt),c=i("".replace),o=i("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,i,h,d){var f=n+t.length,v=i.length,m=u;return void 0!==h&&(h=a(h),m=l),c(d,m,(function(a,c){var l;switch(s(c,0)){case"$":return"$";case"&":return t;case"`":return o(e,0,n);case"'":return o(e,f);case"<":l=h[o(c,1,-1)];break;default:var u=+c;if(0===u)return a;if(u>v){var d=r(u/10);return 0===d?a:d<=v?void 0===i[d-1]?s(c,1):i[d-1]+s(c,1):a}l=i[u-1]}return void 0===l?"":l}))}},"0fb6":function(t,e,n){"use strict";n("88d0")},"4de4":function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").filter,r=n("1dde"),s=r("filter");i({target:"Array",proto:!0,forced:!s},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},5319:function(t,e,n){"use strict";var i=n("2ba4"),a=n("c65b"),r=n("e330"),s=n("d784"),c=n("d039"),o=n("825a"),l=n("1626"),u=n("5926"),h=n("50c4"),d=n("577e"),f=n("1d80"),v=n("8aa5"),m=n("dc4a"),b=n("0cb2"),p=n("14c3"),g=n("b622"),y=g("replace"),C=Math.max,_=Math.min,x=r([].concat),w=r([].push),k=r("".indexOf),P=r("".slice),$=function(t){return void 0===t?t:String(t)},L=function(){return"$0"==="a".replace(/./,"$0")}(),S=function(){return!!/./[y]&&""===/./[y]("a","$0")}(),T=!c((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));s("replace",(function(t,e,n){var r=S?"$":"$0";return[function(t,n){var i=f(this),r=void 0==t?void 0:m(t,y);return r?a(r,t,i,n):a(e,d(i),t,n)},function(t,a){var s=o(this),c=d(t);if("string"==typeof a&&-1===k(a,r)&&-1===k(a,"$<")){var f=n(e,s,c,a);if(f.done)return f.value}var m=l(a);m||(a=d(a));var g=s.global;if(g){var y=s.unicode;s.lastIndex=0}var L=[];while(1){var S=p(s,c);if(null===S)break;if(w(L,S),!g)break;var T=d(S[0]);""===T&&(s.lastIndex=v(c,h(s.lastIndex),y))}for(var O="",I=0,N=0;N<L.length;N++){S=L[N];for(var H=d(S[0]),M=C(_(u(S.index),c.length),0),j=[],A=1;A<S.length;A++)w(j,$(S[A]));var F=S.groups;if(m){var D=x([H],j,M,c);void 0!==F&&w(D,F);var U=d(i(a,void 0,D))}else U=b(H,c,M,j,F,a);M>=I&&(O+=P(c,I,M)+U,I=M+H.length)}return O+P(c,I)}]}),!T||!L||S)},5501:function(t,e,n){},"88d0":function(t,e,n){},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},a0e7:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{staticClass:"mb-5",attrs:{Picture:t.item.Picture},scopedSlots:t._u([{key:"bottomRight",fn:function(){return[n("div",{staticClass:"d-flex"},[n("div",{staticClass:"\n            button\n            d-flex\n            justify-content-center\n            align-items-center\n            rounded-circle\n            bg-white\n            shadow\n          ",on:{click:[function(e){return e.stopPropagation(),e.preventDefault(),t.toggleColect(t.item)},function(e){t.showPinFill=!t.showPinFill}]}},[n("i",{staticClass:"bi",class:[t.showPinFill?"bi-pin-angle-fill":"bi-pin-angle"],staticStyle:{"font-size":"22px"}})])])]},proxy:!0}])}),n("div",{staticClass:"container mb-5"},[n("div",{staticClass:"article row justify-content-center mb-5"},[n("div",{staticClass:"col-xl-11 col-lg-9"},[n("div",{staticClass:"article__title d-flex align-items-center"},[n("div",{staticClass:"btn-previous-page p-0",on:{click:function(e){return t.$router.go(-1)}}},[n("i",{staticClass:"bi bi-chevron-left",staticStyle:{"font-size":"20px","font-weight":"700"}})]),n("h1",{staticClass:"ms-3"},[t._v(t._s(Object.values(t.item)[1]))])]),n("div",{staticClass:"row mt-5"},[n("div",{staticClass:"col-lg-7"},[n("div",{staticClass:"article__text"},[n("p",[t._v(t._s(t.checkValue(t.item.Description)))])])]),n("div",{staticClass:"col-lg-5"},[n("div",{staticClass:"article__info"},[n("div",{staticClass:"shadow-sm p-4 mb-3 bg-white d-flex",staticStyle:{"border-radius":"20px"}},[n("i",{staticClass:"bi bi-geo-alt-fill d-block me-3"}),t._v(" "+t._s(t.checkValue(t.item.Address))+" ")]),n("div",{staticClass:"shadow-sm p-4 mb-3 bg-white d-flex",staticStyle:{"border-radius":"20px"}},[n("i",{staticClass:"bi bi-telephone-fill d-block me-3"}),t.item.Phone?n("a",{attrs:{href:"tel:"+t.item.Phone}},[t._v(t._s(t.formatNumber))]):n("a",[t._v("未提供資訊")])]),n("div",{staticClass:"shadow-sm p-4 mb-3 bg-white d-flex",staticStyle:{"border-radius":"20px"}},[n("i",{staticClass:"bi bi-clock-fill d-block me-3"}),n("span",[t._v(t._s(t.checkValue(t.item.OpenTime)))])]),n("a",{attrs:{href:t.item.WebsiteUrl,target:"_blank"}},[n("div",{staticClass:"shadow-sm p-4 mb-3 bg-white d-flex",class:{"d-none":!t.item.WebsiteUrl},staticStyle:{"border-radius":"20px","word-break":"break-all"}},[n("i",{staticClass:"bi bi-share-fill d-block me-3"}),t._v(" "+t._s(t.item.WebsiteUrl)+" ")])])])])]),n("l-map",{staticStyle:{width:"100%",height:"400px","margin-top":"32px"},attrs:{zoom:18,center:t.markerLatLng}},[n("l-tile-layer",{attrs:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors'}}),n("l-marker",{attrs:{"lat-lng":t.markerLatLng}})],1)],1)]),t._l(t.types,(function(e,i){return n("NearbyList",{key:e.en,attrs:{name:e.ch,list:t.nearbyLists[i],city:t.item.City}})}))],2),n("Footer")],1)},a=[],r=n("1da1"),s=(n("96cf"),n("ac1f"),n("5319"),n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("fb6a"),n("4de4"),n("07ac"),n("0418")),c=n("fd2d"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.list&&t.list.length?n("div",{staticClass:"nearby__list"},[n("div",{staticClass:"\n      nearby__list__header\n      d-flex\n      align-items-center\n      justify-content-between\n    "},[n("h3",[t._v("附近"+t._s(t.name))]),n("div",{staticClass:"btn btn-explore-more",on:{click:t.setSearchConfig}},[t._v(" 更多"+t._s(t.name)),n("i",{staticClass:"bi bi-caret-right-fill"})])]),n("div",{staticClass:"nearby__list__body row justify-content-center"},t._l(t.list,(function(t){return n("router-link",{key:Object.values(t)[0],staticClass:"col-lg-3 col-md-6 col-sm-6 col-xs-12 mb-2",attrs:{to:{name:"Tourism",params:{id:Object.values(t)[0]}},replace:""}},[n("Card",{attrs:{item:t}})],1)})),1)]):t._e()},l=[],u=(n("7db0"),n("b0c0"),n("e9c4"),n("ae8d")),h={name:"NearbyList",components:{Card:u["a"]},data:function(){return{cities:[{ch:"台北市",en:"Taipei",value:"Taipei"},{ch:"新北市",en:"New Taipei",value:"NewTaipei"},{ch:"基隆市",en:"Keelung",value:"Keelung"},{ch:"宜蘭縣",en:"Yilan",value:"YilanCounty"},{ch:"桃園縣",en:"Taoyuan",value:"Taoyuan"},{ch:"新竹縣",en:"Hsinchu",value:"HsinchuCounty"},{ch:"新竹市",en:"Hsinchu",value:"Hsinchu"},{ch:"苗栗縣",en:"Miaoli",value:"MiaoliCounty"},{ch:"台中市",en:"Taichung",value:"Taichung"},{ch:"彰化縣",en:"Changhua",value:"ChanghuaCounty"},{ch:"南投縣",en:"Nantou",value:"NantouCounty"},{ch:"雲林縣",en:"Yunlin",value:"YunlinCounty"},{ch:"嘉義縣",en:"Chiayi",value:"ChiayiCounty"},{ch:"嘉義市",en:"Chiayi",value:"Chiayi"},{ch:"台南市",en:"Tainan",value:"Tainan"},{ch:"高雄市",en:"Kaohsiung",value:"Kaohsiung"},{ch:"屏東縣",en:"Pingtung",value:"PingtungCounty"},{ch:"花蓮縣",en:"Hualien",value:"HualienCounty"},{ch:"台東縣",en:"Taitung",value:"TaitungCounty"},{ch:"澎湖縣",en:"Penghu",value:"PenghuCounty"},{ch:"金門縣",en:"Kinmen",value:"KinmenCounty"},{ch:"連江縣",en:"Lienchiang",value:"LienchiangCounty"}],types:[{ch:"景點",en:"ScenicSpot"},{ch:"活動",en:"Activity"},{ch:"美食",en:"Restaurant"},{ch:"旅宿",en:"Hotel"}]}},props:{name:{},list:{},city:{}},methods:{setSearchConfig:function(){var t=this,e={city:this.cities.find((function(e){return e.ch===t.city})),type:this.types.find((function(e){return e.ch===t.name}))};sessionStorage.setItem("F2E_Travel_Search",JSON.stringify(e)),this.$router.push({name:"Home"})}}},d=h,f=(n("0fb6"),n("2877")),v=Object(f["a"])(d,o,l,!1,null,"22c25add",null),m=v.exports,b=n("2699"),p=n("a40a"),g=n("4e2b"),y=n("e11e"),C=n("6fb9"),_={name:"Tourism",components:{Header:s["a"],Footer:c["a"],NearbyList:m,LMap:b["a"],LTileLayer:p["a"],LMarker:g["a"]},data:function(){return{item:{},nearbyLists:[],showPinFill:!1,types:[{ch:"景點",en:"ScenicSpot"},{ch:"活動",en:"Activity"},{ch:"美食",en:"Restaurant"},{ch:"旅宿",en:"Hotel"}],markerLatLng:[0,0]}},created:function(){this.getPage(),this.reloadLMarkerIcon()},watch:{$route:function(){this.getPage()}},computed:{formatNumber:function(){var t=this.item.Phone;return t?t.replace(/886-/,"0"):""}},methods:{getPage:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!navigator.onLine){e.next=10;break}return e.next=3,t.getItem();case 3:n=e.sent,t.item=n.data[0],t.markerLatLng=[t.item.Position.PositionLat,t.item.Position.PositionLon],t.getNearbyItems(),t.showPinFill=t.isCollected(t.item),e.next=11;break;case 10:Object(C["b"])(t.$route.params.id).then((function(e){t.item=e}));case 11:case"end":return e.stop()}}),e)})))()},getItem:function(){var t=this.$route.params.id,e=this.$route.params.id.substr(0,2);return e=this.getCategory(e),this.axios.get("https://ptx.transportdata.tw/MOTC/v2/Tourism/".concat(e),{params:{$filter:"".concat(e,"ID eq '").concat(t,"'"),$format:"JSON"},headers:this.GetAuthorizationHeader()})},getNearbyItems:function(){var t=this;Promise.all(this.types.map((function(e){return t.axios.get("https://ptx.transportdata.tw/MOTC/v2/Tourism/".concat(e.en),{params:{$select:"".concat(e.en,"ID, ").concat(e.en,"Name, Address, Picture, Description, Phone, Position"),$top:5,$spatialFilter:"nearby(".concat(t.item.Position.PositionLat,", ").concat(t.item.Position.PositionLon,", 40000)"),$format:"JSON"},headers:t.GetAuthorizationHeader()})}))).then((function(e){t.nearbyLists=e.map((function(e){return e.data.filter((function(e){return Object.values(e)[0]!==t.$route.params.id})).slice(0,4)}))}))},reloadLMarkerIcon:function(){delete y["Icon"].Default.prototype._getIconUrl,y["Icon"].Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")})},checkValue:function(t){return t||"未提供資訊"}}},x=_,w=(n("b25e"),Object(f["a"])(x,i,a,!1,null,"708957b0",null));e["default"]=w.exports},b0c0:function(t,e,n){var i=n("83ab"),a=n("5e77").EXISTS,r=n("e330"),s=n("9bf2").f,c=Function.prototype,o=r(c.toString),l=/^\s*function ([^ (]*)/,u=r(l.exec),h="name";i&&!a&&s(c,h,{configurable:!0,get:function(){try{return u(l,o(this))[1]}catch(t){return""}}})},b25e:function(t,e,n){"use strict";n("5501")},d81d:function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").map,r=n("1dde"),s=r("map");i({target:"Array",proto:!0,forced:!s},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(t,e,n){"use strict";var i=n("23e7"),a=n("da84"),r=n("e8b5"),s=n("68ee"),c=n("861d"),o=n("23cb"),l=n("07fa"),u=n("fc6a"),h=n("8418"),d=n("b622"),f=n("1dde"),v=n("f36a"),m=f("slice"),b=d("species"),p=a.Array,g=Math.max;i({target:"Array",proto:!0,forced:!m},{slice:function(t,e){var n,i,a,d=u(this),f=l(d),m=o(t,f),y=o(void 0===e?f:e,f);if(r(d)&&(n=d.constructor,s(n)&&(n===p||r(n.prototype))?n=void 0:c(n)&&(n=n[b],null===n&&(n=void 0)),n===p||void 0===n))return v(d,m,y);for(i=new(void 0===n?p:n)(g(y-m,0)),a=0;m<y;m++,a++)m in d&&h(i,a,d[m]);return i.length=a,i}})}}]);
//# sourceMappingURL=tourism.2b72073e.js.map